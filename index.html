<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Navegador FE ‚Äì Base de Conocimiento</title>

<!-- CSP SEGURA -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' https://www.gstatic.com https://cdn.jsdelivr.net;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  font-src 'self' https:;
  connect-src 'self' https://firestore.googleapis.com https://firebase.googleapis.com;
  frame-ancestors 'none';
  object-src 'none';
  base-uri 'self';
">

<!-- ESTILOS -->
<link rel="stylesheet" href="css/styles.css">

<!-- DOMPurify -->
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.0/dist/purify.min.js"></script>

</head>
<body>

<!-- ========================================================= -->
<!--                       HEADER ESTILO MACOS                 -->
<!-- ========================================================= -->
<header>
    <div class="brand">
        <div class="brand-icon">FE</div>
        <div>
            <div class="brand-text-title">Navegador FE</div>
            <div class="brand-text-sub">Base de conocimiento para agentes y backoffice</div>
        </div>
    </div>

    <div class="header-actions">
        <button id="btnAdmin" class="btn btn-outline">Panel Admin</button>
        <button id="themeToggle" class="btn">Modo oscuro</button>
    </div>
</header>

<!-- ========================================================= -->
<!--                       CONTENIDO                            -->
<!-- ========================================================= -->
<div class="container">

    <!-- ======================= BUSCADOR ======================= -->
    <section class="search-section">

        <div class="search-label">Busca por palabra clave, norma, flujo, speech o frase exacta</div>

        <div class="search-wrapper">
            <span class="search-icon">
                <span class="fe-icon search"></span>
            </span>

            <input id="searchBar" placeholder="Ej: SBP refinanciamiento, speech objeciones‚Ä¶" />
            <span class="search-kbd">Enter</span>
        </div>

        <!-- FILTROS -->
        <div class="controls-row">

            <div>
                <div class="field-label">Categor√≠a</div>
                <select id="categoriaSelect">
                    <option value="todas">Todas</option>
                    <option value="Norma Regulatoria">Norma Regulatoria</option>
                    <option value="Monitoreo de Calidad">Monitoreo de Calidad</option>
                    <option value="Speech">Speech</option>
                    <option value="Flujos">Flujos</option>
                    <option value="Productos">Productos</option>
                    <option value="General">General</option>
                </select>
            </div>

            <div>
                <div class="field-label">Ordenar por</div>
                <select id="sortSelect">
                    <option value="recientes">M√°s recientes</option>
                    <option value="vistas">M√°s vistos</option>
                    <option value="destacados">Destacados</option>
                </select>
            </div>

        </div>

        <!-- HISTORIAL -->
        <div id="historyBox" class="history-box"></div>

        <!-- INFO -->
        <div class="info-bar">
            <div id="infoResultados">Mostrando 0 resultados.</div>
            <div id="infoOrden"></div>
        </div>
    </section>

    <!-- ================= RECOMENDADOS ================= -->
    <div class="section-title">‚≠ê Recomendados para hoy</div>
    <div id="topResults" class="results"></div>

    <!-- ================= TODA LA LISTA ================= -->
    <div class="section-title">üìÑ Todos los art√≠culos</div>
    <div id="results" class="results"></div>

    <div id="pagination" class="pagination"></div>

</div>

<!-- ========================================================= -->
<!--                        MODAL                               -->
<!-- ========================================================= -->
<div id="modal">
    <div class="modal-content">

        <div class="modal-header">
            <div>
                <h2 id="modalTitle"></h2>
                <p id="modalCategory"></p>
            </div>
            <button id="closeModal">Cerrar</button>
        </div>

        <div id="modalContent"></div>

    </div>
</div>

<!-- ========================================================= -->
<!--                    SCRIPTS DEL PROYECTO                    -->
<!-- ========================================================= -->
<script type="module" src="js/firebase-config.js"></script>
<script type="module" src="js/utils.js"></script>
<script type="module" src="js/index.js"></script>

</body>
</html>
