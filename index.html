<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Navegador FE ‚Äì Base de Conocimiento</title>

<!-- ======================= -->
<!--   CSP (versi√≥n segura)  -->
<!-- ======================= -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' https://www.gstatic.com https://cdn.jsdelivr.net;
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  font-src 'self' https:;
  connect-src 'self' https://firestore.googleapis.com https://firebase.googleapis.com;
  object-src 'none';
  frame-ancestors 'none';
  base-uri 'self';
  upgrade-insecure-requests;
">

<!-- ======================= -->
<!--      ESTILOS APPLE      -->
<!-- ======================= -->
<link rel="stylesheet" href="css/styles.css" />

<!-- Sanitizador obligatorio -->
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.0/dist/purify.min.js"></script>

</head>
<body>

<!-- ========================================================= -->
<!--                        NAV SUPERIOR                        -->
<!-- ========================================================= -->
<header class="topnav">
    <div class="brand">
        <div class="brand-logo">FE</div>
        <div class="brand-text">
            <div class="brand-title">Navegador FE</div>
            <div class="brand-subtitle">Base de conocimiento para agentes y backoffice</div>
        </div>
    </div>

    <div class="header-buttons">
        <button id="btnAdmin" class="btn-secondary">Panel Admin</button>
        <button id="themeToggle" class="btn-primary">Modo oscuro</button>
    </div>
</header>

<!-- ========================================================= -->
<!--                CONTENIDO PRINCIPAL (APPLE KB)             -->
<!-- ========================================================= -->
<div class="container">

    <!-- PANEL BUSCADOR -->
    <section class="search-box">
        <div class="search-label">Busca por palabra clave, norma, flujo, producto o speech</div>

        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input id="searchBar" placeholder="Ej: SBS plazo refinanciamiento, speech objeciones‚Ä¶" />
            <span class="search-hint">Enter</span>
        </div>

        <div class="controls">
            <div class="control-column">
                <label>Categor√≠a</label>
                <select id="categoriaSelect">
                    <option value="todas">Todas</option>
                    <option value="Norma Regulatoria">Norma Regulatoria</option>
                    <option value="Monitoreo de Calidad">Monitoreo de Calidad</option>
                    <option value="Speech">Speech</option>
                    <option value="Flujos">Flujos</option>
                    <option value="Productos">Productos</option>
                    <option value="General">General</option>
                </select>
            </div>

            <div class="control-column">
                <label>Ordenar por</label>
                <select id="sortSelect">
                    <option value="recientes">M√°s recientes</option>
                    <option value="vistas">M√°s vistos</option>
                    <option value="destacados">Destacados</option>
                </select>
            </div>
        </div>

        <div class="history" id="historyBox"></div>

        <div class="info-bar">
            <div id="infoResultados">Mostrando 0 resultados.</div>
            <div id="infoOrden"></div>
        </div>
    </section>

    <!-- ‚≠ê RECOMENDADOS -->
    <div class="section-title">‚≠ê Recomendados para hoy</div>
    <div id="topResults" class="card-grid"></div>

    <!-- üìÑ TODOS LOS ART√çCULOS -->
    <div class="section-title">üìÑ Todos los art√≠culos</div>
    <div id="results" class="card-grid"></div>

    <!-- PAGINACI√ìN -->
    <div id="pagination" class="pagination"></div>

</div>

<!-- ========================================================= -->
<!--                           MODAL                            -->
<!-- ========================================================= -->
<div id="modal" class="modal">
    <div class="modal-panel">
        <div class="modal-header">
            <div>
                <h2 id="modalTitle"></h2>
                <p id="modalCategory"></p>
            </div>
            <button id="closeModal" class="modal-close">Cerrar</button>
        </div>
        <div id="modalContent" class="modal-body"></div>
    </div>
</div>

<!-- ========================================================= -->
<!--                        SCRIPTS                             -->
<!-- ========================================================= -->
<script type="module" src="js/firebase-config.js"></script>
<script type="module" src="js/utils.js"></script>
<script type="module" src="js/index.js"></script>

</body>
</html>
